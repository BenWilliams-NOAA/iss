<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SC: Stock complex ISS • surveyISS</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="SC: Stock complex ISS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">surveyISS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting_started.html">Getting started</a>
    </li>
    <li>
      <a href="../articles/iss_caal.html">SC: Conditional Age-At-Length ISS</a>
    </li>
    <li>
      <a href="../articles/spatial_iss.html">SC: Spatially-explicit ISS</a>
    </li>
    <li>
      <a href="../articles/stock_complex.html">SC: Stock complex ISS</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/BenWilliams-NOAA/surveyISS/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>SC: Stock complex ISS</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/BenWilliams-NOAA/surveyISS/blob/HEAD/vignettes/stock_complex.Rmd" class="external-link"><code>vignettes/stock_complex.Rmd</code></a></small>
      <div class="hidden name"><code>stock_complex.Rmd</code></div>

    </div>

    
    
<p>The following describes the workflow to obtain stock complex input
sample size (ISS) for composition data provided by bottom trawl surveys
that occur in the GOA and AI. Please see the ‘Getting started’ vignette
for installing and loading the <code>surveyISS</code> package, as well
as querying data. To obtain stock complex ISS you will follow the same
steps outlined in the ‘Getting started’ vignette from <em>Step 1</em>
through <em>Step 4</em>, here we provide instructions on how to run the
stock complex cases to obtain ISS that would be conducted in <em>Step
5</em>.</p>
<p>There are two stock complex cases that have been developed that
follow the historical methods that have been used for GOA (e.g.,
rougheye-blackpotted rockfish) and AI (e.g., blackspotted-rougheye
rockfish) stock complex assessments. We note that the stock complex
function for the GOA is also used for the GOA dusky rockfish age/length
composition, as the RACE species codes for dusky rockfish have changed
over time and in some years overlap. These functions can be used for any
combination of species for which a stock complex assessment may be
desired.</p>
<p>The primary difference between the GOA and the AI methods are at what
step the species information is combined within the stock complex. In
the GOA, the historical method has been to use the design-based
expansion methods to obtain age and length population numbers for each
individual species, and then combine them post-expansion (by summing the
population numbers at age or length). In the AI, the historical method
has been to use the design-based expansion methods to obtain the length
population numbers, but then to combine the specimen data for the
species within the stock complex when computing the age-length key that
then is used to obtain the age population numbers. In other words, in
the AI length population numbers are computed for each individual
species, but age population numbers are computed for the species
combined. We note that while the function names for these methods are
defined by survey region, the functions can be used interchangeably for
any survey region (e.g., one can use GOA data within the AI function,
and visa versa, and data from the EBS survey can be used in either of
these functions).</p>
<p>There are two additional arguments within the stock complex functions
as compared to the arguments within the
<code><a href="../reference/srvy_iss.html">surveyISS::srvy_iss()</a></code> function; these are the
<code>cmplx_code</code> and <code>cmplx</code> arguments. The
<code>cmplx_code</code> argument defines the new species code that will
be applied to the stock complex. This numeric string can be whatever you
choose, in our runs we have used a complex code that is a mash-up of the
species_codes for each species. For example, for rougheye and
blackspotted rockfish there are three species_codes that have been used
by RACE: 30050, 30051, and 30052; for the rougheye-blackspotted stock
complex we have defined the species code as <code>3005012</code>. The
<code>cmplx</code> argument is a character string that will be used in
the output file names, we have used either <code>rebs</code> or
<code>bsre</code> depending on which survey region the ISS is being
computed for.</p>
<p>The following is an example to run the GOA stock complex
function:</p>
<pre><code><span><span class="fu">surveyISS</span><span class="fu">::</span><span class="fu"><a href="../reference/srvy_iss_goa_cmplx.html">srvy_iss_goa_cmplx</a></span><span class="op">(</span>iters <span class="op">=</span> <span class="fl">10</span>, </span>
<span>                              lfreq_data <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">lfreq</span>, </span>
<span>                              specimen_data <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">specimen</span>, </span>
<span>                              cpue_data <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">cpue</span>, </span>
<span>                              strata_data <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">strata</span>, </span>
<span>                              yrs <span class="op">=</span> <span class="fl">1990</span>, </span>
<span>                              boot_hauls <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                              boot_lengths <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                              boot_ages <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                              al_var <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                              al_var_ann <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                              age_err <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                              cmplx_code <span class="op">=</span> <span class="fl">3005012</span>,</span>
<span>                              cmplx <span class="op">=</span> <span class="st">'rebs'</span>,</span>
<span>                              region <span class="op">=</span> <span class="st">'goa'</span>, </span>
<span>                              save <span class="op">=</span> <span class="st">'test'</span><span class="op">)</span></span></code></pre>
<p>And the following is an example to run the AI stock complex
function:</p>
<pre><code><span><span class="fu">surveyISS</span><span class="fu">::</span><span class="fu"><a href="../reference/srvy_iss_ai_cmplx.html">srvy_iss_ai_cmplx</a></span><span class="op">(</span>iters <span class="op">=</span> <span class="fl">10</span>, </span>
<span>                             lfreq_data <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">lfreq</span>, </span>
<span>                             specimen_data <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">specimen</span>, </span>
<span>                             cpue_data <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">cpue</span>, </span>
<span>                             strata_data <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">strata</span>,</span>
<span>                             yrs <span class="op">=</span> <span class="fl">1991</span>,</span>
<span>                             boot_hauls <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                             boot_lengths <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                             boot_ages <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                             al_var <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                             al_var_ann <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                             age_err <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                             cmplx_code <span class="op">=</span> <span class="fl">3005012</span>,</span>
<span>                             cmplx <span class="op">=</span> <span class="st">'bsre'</span>,</span>
<span>                             region <span class="op">=</span> <span class="st">'ai'</span>,  </span>
<span>                             save <span class="op">=</span> <span class="st">'test'</span><span class="op">)</span></span></code></pre>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Ben Williams, Pete Hulson.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
